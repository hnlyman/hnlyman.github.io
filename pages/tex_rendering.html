<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TeX Rendering</title>
    <link rel="stylesheet" href="../styles.css">
  </head>
  <body>
    <a href="../index.html">Back to home</a>

    <h1>A Note on TeX on This Site</h1>

    <p>
      The 'standard' way to render math on the web is by using a library like
      <a href="https://www.mathjax.org/">MathJax</a> or
      <a href="https://katex.org/">KaTeX</a>,

      but I have some problems with this approach when it comes to this site.
      First of all, I don't want to include a large, complex Javascript library
      in my small, simple website. This site is also fully static, so
      server-side rendering is off the table. I'm also not inclined to use any
      kind of solution that introduces a compilation step &mdash; the HTML I
      write should be the exact HTML that is served. Second, the standard way
      to use these libraries is to either link a script hosted on another
      domain or use some kind of JS package manager, neither of which I am
      willing to do. It may be possible to download the required files and
      serve them from my own domain, but this is surely not a simple process,
      and it does not change the fact that it introduces complex scripts into
      what should be a very simple and very light website.
    </p>

    <p>
      Using a MathML-based solution with no external libraries presents its own
      challenges. While MathML-Core is widely supported by modern browsers, the
      way the content of the &lt;math&gt; element renders is not quite consistent.
      For instance, here are two screenshots of the same MathML formula
      displayed on two different browsers:
    </p>

    <img src="../resources/MathML_example_firefox.png" alt="MathML example Firefox" />
    <img src="../resources/MathML_example_bravebeta.png" alt="MathML example Brave Beta" />
    
    <p> 
      I also have concerns about the immaturity of MathML-Core, which,
      well-supported as it may be, is a relatively young spec, no more than a
      <a href="https://www.w3.org/TR/2025/CR-mathml-core-20250624/">W3C Candidate Recommendation</a>.
      MathML3 has quite a few issues, hence the need for MathML-Core to exist
      in the first place. I am not well-read on the differences between
      MathML-Core and MathML3, or, indeed, on MathML in general &mdash; in fact
      I know very little about the subject. For now, though, I do not trust in
      enough in MathML's reliability and consistency to use it on this site.
    </p>

    <p>
      Instead, I have chosen to include TeX formulas as SVG images. These
      images are fairly small (This one: 
      <img src="../resources/_pr.sin2cos2.svg" alt="\cos^2x + \sin^2x = 1" />
      is 11.7kb. For reference, as of KaTeX v0.16.28, the
      <a href="https://cdn.jsdelivr.net/npm/katex@0.16.28/dist/katex.min.js">katex.min.js</a>
      file, representing a fraction of the memory footprint of using KaTeX, is
      over 270kb). They will render quickly, consistently, and correctly in
      almost all cases. Admittedly, the downsides of the SVG-based approach are
      numerous. They are less accessible, being essentially invisible to
      screen readers. They make it impossible to highlight or copy-and-paste
      part of a formula. They don't play well with extensions that mess with
      the CSS on the page, particularly 'dark mode' extensions. And, if they
      are to be included statically, they must be generated by some external
      tool. This is inconvenient, especially as it means that a brand new SVG
      must be made every time a formula is tweaked even slightly.
    </p>

    <p> Despite its issues, I prefer the SVG-based solution to any of the
    others I know of. It aligns best with the philosophy and design goals of
    this site. Here are some notes on implementation: </p>

    <ul>
      <li>
        The .svg files are given descriptive names and stored in the same
        `resources/` directory as the rest of the non-HTML static content on
        this site.
      </li>
      <li>
          Having not set up a satisfactory command-line tool to turn TeX into
          SVG, I have resorted to using a website, namely Thomas Lochmatter's
          <a href="https://viereck.ch/latex-to-svg/">LaTeX to SVG</a> page.
      </li>
      <li>
        The .svg files are invoked using &lt;img&gt; elements with the TeX text
        used to generate them as the alt text.
      </li>
    </ul>

    <p>
      This solution is far from ideal, and will certainly have to evolve with
      my needs, but my
      <a href="./prime_power_series.html">first</a>
      <a href="./a_proof_in_set_theory.html">couple</a>
      formula-heavy short pieces have come out looking fine.
    </p>

  </body>
</html>
